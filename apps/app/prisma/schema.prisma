// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
  directUrl = env("DIRECT_DATABASE_URL")
}

model ParkingFacility {
  id   String       @id @default(cuid())
  rows ParkingRow[]
}

model ParkingRow {
  id                String          @id @default(cuid())
  stalls            ParkingStall[]
  parkingFacilityId String
  parkingFacility   ParkingFacility @relation(fields: [parkingFacilityId], references: [id])
  order             Int
  opening           String          @default("top")
  group             Int
}

model ParkingStall {
  id           String     @id @default(cuid())
  occupied     Boolean    @default(false)
  lastUpdated  DateTime   @default(now())
  parkingRowId String
  parkingRow   ParkingRow @relation(fields: [parkingRowId], references: [id])
}
